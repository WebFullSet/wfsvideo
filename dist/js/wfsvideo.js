class WFSvideo{constructor(t){this.config=t,this.defTypeVideo=["video","youtube","vimeo","tiktok"],this.def={classVideo:"wfsv-video",clSwitcher:"wfsv-switcher",clActive:"active",clFraction:"wfsv-fraction",clProgressbar:"wfsv-progressbar",splitYoutube:["https://youtube.com/shorts/","https://youtu.be/"],splitTiktok:"web_id=",splitVimeo:"https://vimeo.com/",regex:/video\/.*?\?/g,regex2:/video\/(.*?)(?=\s|$)/g,clBeforeClose:"wfsv-start-animate",clPagination:"wfsv-pagination",defaultHtml:'<div class="wfsv-modal" id="wfsv-video">\n\t\t\t\t\t\t\t<div class="wfsv-holder-button">\n\t\t\t\t\t\t\t\t<div class="wfsv-holder-description">\n\t\t\t\t\t\t\t\t\t<strong class="wfsv-title"></strong>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul class="wfsv-list-button">\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a href="#" class="wfsv-icon wfsv-prev">\n\t\t\t\t\t\t\t\t\t\t\t<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t\t\t\t<path d="M11.165 6.91833L4.08331 14L11.165 21.0817" stroke="#292D32" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<path d="M23.9167 14H4.28168" stroke="#292D32" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a href="#" class="wfsv-icon wfsv-next">\n\t\t\t\t\t\t\t\t\t\t\t<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t\t\t\t<path d="M16.835 6.91833L23.9167 14L16.835 21.0817" stroke="#292D32" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<path d="M4.08331 14H23.7183" stroke="#292D32" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t\t\t\t\t\t</svg> \n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a href="#" class="wfsv-icon wfsv-close">\n\t\t\t\t\t\t\t\t\t\t\t<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t\t\t\t<g clip-path="url(#clip0_555_7451)">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path d="M21 7L7 21" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path d="M7 7L21 21" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="wfsv-holder-video"></div>\n\t\t\t\t\t\t\t<div class="wfsv-pagination"></div>\n\t\t\t\t\t\t</div>'},this.options={conteiner:".list-video",elements:".open-modal-video",modalBox:"#wfsv-video",appendtDefaultHtml:!1,videoBox:".holder-video",openClass:"open-video",title:!0,type:!0,titleClass:".title",navigation:{nextBtn:".next-video",prevBtn:".prev-video",closeBtn:".close-video",disableBtn:"hedden-btn"},pagination:{start:!1,el:".wfs-pagination",type:"switcher",htmlEl:"",clickable:!0}},"object"==typeof t&&(this.navigation={...this.options.navigation,...t.navigation},this.pagination={...this.options.pagination,...t.pagination},this.options={...this.options,...t}),this.init()}init(){return this.#t(),this.#e(),this.options}#t(){this.conteiner=document.querySelector(this.options.conteiner),null!=this.conteiner&&(this.bodyElement=document.querySelector("body"),this.elements=this.conteiner.querySelectorAll(this.options.elements),this.modalBox=document.querySelector(this.options.modalBox),!this.modalBox&&this.options.appendtDefaultHtml&&(this.bodyElement.insertAdjacentHTML("beforeend",this.def.defaultHtml),this.modalBox=document.querySelector(this.options.modalBox)),this.modalBox&&(this.nextBtn=this.modalBox.querySelector(this.navigation.nextBtn),this.prevBtn=this.modalBox.querySelector(this.navigation.prevBtn),this.closeBtn=this.modalBox.querySelector(this.navigation.closeBtn),this.videoBox=this.modalBox.querySelector(this.options.videoBox),this.options.title&&(this.title=this.modalBox.querySelector(this.options.titleClass)),this.pagination.start&&(this.paginationBox=this.modalBox.querySelector(this.pagination.el))))}#e(){this.arryCheck=[],this.flagButton=!0,this.flagPagination=!0,this.options.type||(this.flagButton=!1,this.flagPagination=!1),this.flagButton&&this.pagination.start||(this.flagPagination=!1),this.elements||this.arryCheck.push("Elements"),this.modalBox||this.arryCheck.push("Modal box"),this.flagButton||this.nextBtn||this.arryCheck.push("Next button"),this.flagButton||this.prevBtn||this.arryCheck.push("Prev button"),this.closeBtn||this.arryCheck.push("Close button"),this.videoBox||this.arryCheck.push("Video box"),this.options.title&&!this.title&&this.arryCheck.push("Title element"),this.flagPagination&&!this.paginationBox&&this.arryCheck.push("Pagination box"),this.arryCheck.length>0?console.log("Elements not found: "+this.arryCheck):this.#i()}#i(){this.arryHrefLenth=this.elements.length,this.arryHrefcount=this.arryHrefLenth-1,this.elementIndex=0,this.#s(),this.flagButton?(this.handleNextClick=this.#n.bind(this),this.handlePrevClick=this.#o.bind(this)):(this.nextBtn&&this.nextBtn.remove(),this.prevBtn&&this.prevBtn.remove()),this.handleCloseClick=this.#h.bind(this),this.handleTransitionend=this.#r.bind(this)}#r(t){this.bodyElement.classList.contains(this.def.clBeforeClose)&&t.target===this.modalBox&&this.#l()}#a(){this.modalBox.addEventListener("transitionend",this.handleTransitionend)}#d(){this.modalBox.removeEventListener("transitionend",this.handleTransitionend)}#s(){this.arryHref=[],this.arryTypeVideo=[],this.arryTitle=[],this.listeners=new Map,Array.from(this.elements).forEach(((t,e)=>{this.arryHref.push(t.getAttribute("href")),this.arryTypeVideo.push(t.getAttribute("data-type")),this.options.title&&this.arryTitle.push(t.getAttribute("data-title"));const i=t=>this.#c(e,t);this.listeners.set(t,i),t.addEventListener("click",i)}))}#p(){Array.from(this.elements).forEach(((t,e)=>{const i=this.listeners.get(t);i&&(t.removeEventListener("click",i),this.listeners.delete(t))}))}#c(t,e){e.preventDefault(),this.bodyElement.classList.contains(this.options.openClass)||(this.bodyElement.classList.add(this.options.openClass),this.elementIndex=t,this.#v(),this.options.title&&(this.title.textContent=this.arryTitle[this.elementIndex]),this.pagination.start&&this.flagPagination&&this.paginationBox&&(this.#f(),this.#m()),this.#g(),this.#u(),this.flagButton&&this.#y(),this.#a())}#h(t){t.preventDefault(),this.bodyElement.classList.contains(this.options.openClass)&&!this.bodyElement.classList.contains(this.def.clBeforeClose)&&this.bodyElement.classList.add(this.def.clBeforeClose)}#v(){this.closeBtn.addEventListener("click",this.handleCloseClick)}#B(){this.closeBtn.removeEventListener("click",this.handleCloseClick)}#g(){if(this.typeVideo=this.arryTypeVideo[this.elementIndex],this.href=this.arryHref[this.elementIndex],"video"==this.typeVideo)this.htmlVideo=`<video id="${this.def.classVideo}" controls="" autoplay="true">\n\t\t\t\t\t\t\t\t<source id="source" src="${this.href}" type="video/mp4">\n\t\t\t\t\t\t\t  </video>`;else{if("youtube"==this.typeVideo)for(let t=0;t<this.def.splitYoutube.length;t++)this.href.includes(this.def.splitYoutube[t])&&(this.href=this.href.replace(this.def.splitYoutube[t],""),this.htmlVideo=`<iframe id="${this.def.classVideo}" src="https://www.youtube-nocookie.com/embed/${this.href}&autoplay=1&loop=1" allow="autoplay; fullscreen" scrolling="auto"></iframe> `,t=this.def.splitYoutube.length);"vimeo"==this.typeVideo&&(this.href=this.href.replace(this.def.splitVimeo,""),this.htmlVideo=`<iframe id="${this.def.classVideo}" src="https://player.vimeo.com/video/${this.href}?autoplay=1&loop=1" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe> `),"tiktok"==this.typeVideo&&(this.href.includes("?")?this.href=this.href.match(this.def.regex).toString().slice(6,-1):this.href=this.href.match(this.def.regex2).toString().slice(6),this.htmlVideo=`<iframe id="${this.def.classVideo}" src="https://www.tiktok.com/player/v1/${this.href}?&autoplay=1&description=1&loop=1&volume_control=1" allow="fullscreen" title="${this.arryTitle[this.elementIndex]}"></iframe>`)}this.videoBox.innerHTML=this.htmlVideo,this.vodeoElement=this.modalBox.querySelector("#"+this.def.classVideo)}#x(){"video"==this.typeVideo?this.vodeoElement.pause():this.vodeoElement.src="",this.videoBox.innerHTML=""}#n(t){this.#w(this.nextBtn,!0,t)}#o(t){this.#w(this.prevBtn,!1,t)}#u(){this.flagButton&&this.options.type&&(this.nextBtn.addEventListener("click",this.handleNextClick),this.prevBtn.addEventListener("click",this.handlePrevClick))}#k(){this.flagButton&&this.options.type&&(this.nextBtn.removeEventListener("click",this.handleNextClick),this.prevBtn.removeEventListener("click",this.handlePrevClick))}#w(t,e,i){i.preventDefault(),t.classList.contains(this.navigation.disableBtn)||(e?this.elementIndex++:this.elementIndex--,this.paginationBox&&this.options.type&&this.#m(),this.flagButton&&this.#y(),this.#x(),this.#g())}#y(){this.nextBtn.classList.remove(this.navigation.disableBtn),this.prevBtn.classList.remove(this.navigation.disableBtn),0==this.elementIndex&&this.prevBtn.classList.add(this.navigation.disableBtn),this.elementIndex==this.arryHrefcount&&this.nextBtn.classList.add(this.navigation.disableBtn)}#m(){"switcher"==this.pagination.type&&this.#b(),"progress"==this.pagination.type&&this.#E(),"fraction"==this.pagination.type&&this.#L()}#b(){Array.from(this.switcher).forEach(((t,e)=>{t.classList.remove(this.def.clActive)})),this.switcher[this.elementIndex].classList.add(this.def.clActive)}#E(){this.progressbar.style.width=this.progressBoxW*(this.elementIndex+1)+"%"}#L(){this.fractionActive.textContent=this.elementIndex+1}#f(){"switcher"==this.pagination.type&&this.#C(),"progress"==this.pagination.type&&this.#P(),"fraction"==this.pagination.type&&this.#V()}#C(){let t=`<div class="${this.def.clSwitcher}">`;Array.from(this.elements).forEach(((e,i)=>{this.pagination.htmlEl.length>0?t+=this.pagination.htmlEl:t+="<span></span>"})),t+="</div>",this.paginationBox.insertAdjacentHTML("afterbegin",t),this.switcher=this.modalBox.querySelectorAll(`.${this.def.clSwitcher} > *`),this.pagination.clickable&&(this.listenersSwitcher=new Map,Array.from(this.switcher).forEach(((t,e)=>{const i=t=>this.#S(e,t);this.listenersSwitcher.set(t,i),t.addEventListener("click",i)})))}#P(){this.paginationBox.insertAdjacentHTML("afterbegin",`<div class="${this.def.clProgressbar}"><div class="${this.def.clProgressbar}-in"></div></div>`),this.progressbar=this.modalBox.querySelectorAll(`.${this.def.clProgressbar}-in`)[0],this.progressBoxW=100/this.arryHrefLenth}#V(){this.paginationBox.insertAdjacentHTML("afterbegin",`\n\t\t\t\t<div class="${this.def.clFraction}">\n\t\t\t\t\t<div class="${this.def.clFraction}-active"></div>\n\t\t\t\t\t<div class="${this.def.clFraction}-total">${this.arryHrefLenth}</div>\n\t\t\t\t</div>`),this.fractionActive=this.modalBox.querySelectorAll(`.${this.def.clFraction}-active`)[0]}#S(t,e){e.preventDefault(),this.elementIndex=t,this.#m(),this.flagButton&&this.#y(),this.#x(),this.#g()}#A(){this.paginationBox&&this.options.type&&("switcher"==this.pagination.type&&Array.from(this.switcher).forEach(((t,e)=>{const i=this.listenersSwitcher.get(t);i&&(t.removeEventListener("click",i),this.listenersSwitcher.delete(t))})),this.paginationBox.innerHTML="")}#l(){this.bodyElement.classList.remove(this.options.openClass),this.bodyElement.classList.remove(this.def.clBeforeClose),this.options.title&&(this.title.textContent=""),this.#x(),this.#A(),this.#k(),this.#B(),this.#d()}destroy(){this.#p()}}
//# sourceMappingURL=../maps/wfsvideo.js.map
